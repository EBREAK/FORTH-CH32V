
\ HARDWARE RNG

: HWRNG-CLOCK-INIT RCC_BASE R32_RCC_AHBPCENR + DUP L@ RCC_RNG OR SWAP L! ;

: HWRNG-INIT RNG_EN RNG_BASE R32_RNG_CR + L! ;

HWRNG-CLOCK-INIT HWRNG-INIT

: HWRNG-RDY? RNG_BASE R32_RNG_SR + L@ RNG_DRDY AND 0<> ;

: HWRNG-WAIT BEGIN PAUSE HWRNG-RDY? UNTIL ;

: HWRNG-READ HWRNG-WAIT RNG_BASE R32_RNG_DR + L@ ;



