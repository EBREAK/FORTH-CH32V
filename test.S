	DFW PZCHK, "PZCHK"
	li a0, TOS_INIT
	bne a0, a5, 1f
	lw a0, USER_PS0(tp)
	bne s1, a0, 1f
	ret
1:
	li a0, UART1_BASE
	li a1, '#'
	sw a1, R32_UART_DATAR(a0)
	j 1b
	ENDW PZCHK

	DFW EQCHK, "EQCHK"
	mv a0, a5
	lw a1, 0(s1)
	lw a5, 4(s1)
	addi s1, s1, 8
	bne a0, a1, 1f
	ret
1:
	li a0, UART1_BASE
	li a1, '!'
	sw a1, R32_UART_DATAR(a0)
	j 1b
	ENDW EQCHK

	.section .text
FORTH_SELFTEST:
	RPUSH ra


TEST_0BRANCH:
	FC W_FALSE; FC W_0BRANCH; .2BYTE 2f - .
1:
	FC W_FALSE; FC W_0BRANCH; .2BYTE 3f - .
2:
	FC W_TRUE; FC W_0BRANCH; .2BYTE 0xDEAD
	FC W_FALSE; FC W_0BRANCH; .2BYTE 1b - .
3:
	FC W_TRUE; FC W_0BRANCH; .2BYTE 0xBEEF

TEST_PZCHK:
	/*
	li a5, ~(TOS_INIT)
	PPUSH a5
	*/
	FC W_PZCHK

TEST_EQCHK:
	/*
	FC W_FALSE; FC W_TRUE; FC W_EQCHK; FC W_PZCHK;
	*/
	FC W_TRUE; FC W_TRUE; FC W_EQCHK; FC W_PZCHK;

TEST_SWLIT:
	FC W_SWLIT; .2BYTE FORTH_FALSE; FC W_FALSE
	FC W_EQCHK; FC W_PZCHK

	FC W_SWLIT; .2BYTE 0xFFFF; FC W_0XFFFFFFFF
	FC W_EQCHK; FC W_PZCHK

TEST_UWLIT:
	FC W_UWLIT; .2BYTE FORTH_FALSE; FC W_FALSE
	FC W_EQCHK; FC W_PZCHK

	FC W_UWLIT; .2BYTE 0xFFFF; FC W_0XFFFF
	FC W_EQCHK; FC W_PZCHK

TEST_SLLIT:
	FC W_SLLIT; .4BYTE 0x01234567; FC W_0X01234567
	FC W_EQCHK; FC W_PZCHK


TEST_ULLIT:
	FC W_ULLIT; .4BYTE 0x01234567; FC W_0X01234567
	FC W_EQCHK; FC W_PZCHK

	FC W_ULLIT; .4BYTE 0xFFFFFFFF; FC W_0XFFFFFFFF
	FC W_EQCHK; FC W_PZCHK

	FC W_ULLIT; .4BYTE 0x89ABCDEF; FC W_0X89ABCDEF
	FC W_EQCHK; FC W_PZCHK

TEST_EXECUTE:
	FC W_ULLIT; .4BYTE W_TRUE; FC W_EXECUTE; FC W_TRUE
	FC W_EQCHK; FC W_PZCHK

	FC W_ULLIT; .4BYTE W_FALSE; FC W_EXECUTE; FC W_FALSE
	FC W_EQCHK; FC W_PZCHK

	FC W_ULLIT; .4BYTE W_0X9; FC W_EXECUTE; FC W_0X9
	FC W_EQCHK; FC W_PZCHK

TEST_PERFORM:
	FC W_ULLIT; .4BYTE 1f; FC W_PERFORM; FC W_0XFF
	FC W_EQCHK; FC W_PZCHK

	FC W_ULLIT; .4BYTE 2f; FC W_PERFORM; FC W_0XE
	FC W_EQCHK; FC W_PZCHK

	j 4f
1:
	.4BYTE W_0XFF
2:
	.4BYTE W_0XE
3:
	.p2align 1, 0
4:

TEST_DROP:
	FC W_0X5; FC W_0X7; FC W_DROP; FC W_0X5
	FC W_EQCHK; FC W_PZCHK

TEST_DUP:
	FC W_0XC; FC W_0X4; FC W_DUP; FC W_EQCHK; FC W_0XC;
	FC W_EQCHK; FC W_PZCHK

TEST_SWAP:
	FC W_0XA; FC W_0XB; FC W_0XC; FC W_SWAP;
	FC W_0XB; FC W_EQCHK; FC W_0XC; FC W_EQCHK
	FC W_0XA; FC W_EQCHK; FC W_PZCHK

TEST_NIP:
	FC W_0X5; FC W_0X6; FC W_0X7; FC W_NIP;
	FC W_0X7; FC W_EQCHK; FC W_0X5; FC W_EQCHK;
	FC W_PZCHK

TEST_OVER:
	FC W_0X3; FC W_0X4; FC W_0X5; FC W_OVER;
	FC W_0X4; FC W_EQCHK; FC W_0X5; FC W_EQCHK;
	FC W_0X4; FC W_EQCHK; FC W_0X3; FC W_EQCHK;
	FC W_PZCHK

TEST_ROT:
	FC W_0X7; FC W_0X8; FC W_0X9; FC W_0XA; FC W_ROT;
	FC W_0X8; FC W_EQCHK; FC W_0XA; FC W_EQCHK;
	FC W_0X9; FC W_EQCHK; FC W_0X7; FC W_EQCHK; FC W_PZCHK

TEST_NROT:
	FC W_0X0; FC W_0X1; FC W_0X2; FC W_0X3; FC W_NROT;
	FC W_0X2; FC W_EQCHK; FC W_0X1; FC W_EQCHK
	FC W_0X3; FC W_EQCHK; FC W_0X0; FC W_EQCHK; FC W_PZCHK

	FC W_0XA; FC W_0XB; FC W_0XC; FC W_0XD;
	FC W_ROT; FC W_NROT;
	FC W_0XD; FC W_EQCHK; FC W_0XC; FC W_EQCHK; 
	FC W_0XB; FC W_EQCHK; FC W_0XA; FC W_EQCHK; 
	FC W_PZCHK

TEST_TOR_FROMR:
	FC W_0X7; FC W_0XF; FC W_TOR; FC W_0X7; FC W_EQCHK;
	FC W_PZCHK; FC W_FROMR; FC W_0XF; FC W_EQCHK; FC W_PZCHK

TEST_PICK:
	FC W_0X1; FC W_0X0; FC W_PICK; FC W_EQCHK; FC W_PZCHK
	FC W_0X9; FC W_0XA; FC W_0X1; FC W_PICK;
	FC W_0X9; FC W_EQCHK; FC W_0XA; FC W_EQCHK
	FC W_0X9; FC W_EQCHK; FC W_PZCHK

TEST_DEPTH:
	FC W_DEPTH; FC W_0X0; FC W_EQCHK; FC W_PZCHK
	FC W_0X1; FC W_DEPTH; FC W_EQCHK; FC W_PZCHK
	FC W_0X0; FC W_0X2; FC W_DEPTH; FC W_EQCHK
	FC W_0X0; FC W_EQCHK; FC W_PZCHK

TEST_2DROP:
	FC W_0X6; FC W_0X7; FC W_0X8; FC W_2DROP
	FC W_0X6; FC W_EQCHK; FC W_PZCHK

TEST_2DUP:
	FC W_0X3; FC W_0X4; FC W_0X5; FC W_2DUP
	FC W_0X5; FC W_EQCHK; FC W_0X4; FC W_EQCHK;
	FC W_0X5; FC W_EQCHK; FC W_0X4; FC W_EQCHK;
	FC W_0X3; FC W_EQCHK; FC W_PZCHK

TEST_2SWAP:
	FC W_0XA; FC W_0XB; FC W_0XC; FC W_0XD; FC W_0XE;
	FC W_2SWAP;
	FC W_0XC; FC W_EQCHK; FC W_0XB; FC W_EQCHK;
	FC W_0XE; FC W_EQCHK; FC W_0XD; FC W_EQCHK;
	FC W_0XA; FC W_EQCHK; FC W_PZCHK

TEST_2NIP:
	FC W_0X3; FC W_0X4; FC W_0X5; FC W_0X6; FC W_0X7;
	FC W_2NIP; FC W_0X7; FC W_EQCHK; FC W_0X6; FC W_EQCHK
	FC W_0X3; FC W_EQCHK; FC W_PZCHK

TEST_2OVER:
	FC W_0XB; FC W_0XC; FC W_0XD; FC W_0XE; FC W_0XF;
	FC W_2OVER;
	FC W_0XD; FC W_EQCHK; FC W_0XC; FC W_EQCHK;
	FC W_0XF; FC W_EQCHK; FC W_0XE; FC W_EQCHK;
	FC W_0XD; FC W_EQCHK; FC W_0XC; FC W_EQCHK;
	FC W_0XB; FC W_EQCHK; FC W_PZCHK

TEST_2ROT:
	FC W_0X1; FC W_0X2; FC W_0X3; FC W_0X4; FC W_0X5;
	FC W_0X6; FC W_0X7; FC W_2ROT
	FC W_0X3; FC W_EQCHK; FC W_0X2; FC W_EQCHK;
	FC W_0X7; FC W_EQCHK; FC W_0X6; FC W_EQCHK;
	FC W_0X5; FC W_EQCHK; FC W_0X4; FC W_EQCHK;
	FC W_0X1; FC W_EQCHK; FC W_PZCHK

TEST_2NROT:
	FC W_0X8; FC W_0X9; FC W_0XA; FC W_0XB; FC W_0XC;
	FC W_0XD; FC W_0XE; FC W_2NROT;
	FC W_0XC; FC W_EQCHK; FC W_0XB; FC W_EQCHK;
	FC W_0XA; FC W_EQCHK; FC W_0X9; FC W_EQCHK;
	FC W_0XE; FC W_EQCHK; FC W_0XD; FC W_EQCHK;
	FC W_0X8; FC W_EQCHK; FC W_PZCHK

TEST_3DROP:
	FC W_0X3; FC W_0X4; FC W_0X5; FC W_0X6; FC W_3DROP;
	FC W_0X3; FC W_EQCHK; FC W_PZCHK

TEST_3DUP:
	FC W_0X6; FC W_0X7; FC W_0X8; FC W_0X9; FC W_3DUP
	FC W_0X9; FC W_EQCHK; FC W_0X8; FC W_EQCHK; FC W_0X7; FC W_EQCHK; 
	FC W_0X9; FC W_EQCHK; FC W_0X8; FC W_EQCHK; FC W_0X7; FC W_EQCHK; 
	FC W_0X6; FC W_EQCHK; FC W_PZCHK

TEST_EQ:
	FC W_0X9; FC W_0X8; FC W_0X7; FC W_EQ; FC W_FALSE; FC W_EQCHK
	FC W_0X9; FC W_EQ; FC W_TRUE; FC W_EQCHK; FC W_PZCHK

TEST_NE:
	FC W_0X4; FC W_0X3; FC W_0X2; FC W_NE; FC W_TRUE; FC W_EQCHK
	FC W_0X4; FC W_NE; FC W_FALSE; FC W_EQCHK; FC W_PZCHK

TEST_LT:
	FC W_0X0; FC W_0X1; FC W_LT; FC W_TRUE; FC W_EQCHK;
	FC W_0X1; FC W_0X1; FC W_LT; FC W_FALSE; FC W_EQCHK;
	FC W_0X1; FC W_0X0; FC W_LT; FC W_FALSE; FC W_EQCHK;
	FC W_SWLIT; .2BYTE -1; FC W_SWLIT; .2BYTE 0; FC W_LT; FC W_TRUE;
	FC W_EQCHK;
	FC W_SWLIT; .2BYTE 0; FC W_SWLIT; .2BYTE -1; FC W_LT; FC W_FALSE;
	FC W_EQCHK; FC W_PZCHK

TEST_GT:
	FC W_0X0; FC W_0X1; FC W_GT; FC W_FALSE; FC W_EQCHK;
	FC W_0X1; FC W_0X1; FC W_GT; FC W_FALSE; FC W_EQCHK;
	FC W_0X1; FC W_0X0; FC W_GT; FC W_TRUE; FC W_EQCHK;
	FC W_SWLIT; .2BYTE -1; FC W_SWLIT; .2BYTE 0; FC W_GT; FC W_FALSE;
	FC W_EQCHK;
	FC W_SWLIT; .2BYTE 0; FC W_SWLIT; .2BYTE -1; FC W_GT; FC W_TRUE;
	FC W_EQCHK; FC W_PZCHK

TEST_ULT:
	FC W_0X0; FC W_0X1; FC W_ULT; FC W_TRUE; FC W_EQCHK;
	FC W_0X1; FC W_0X1; FC W_ULT; FC W_FALSE; FC W_EQCHK;
	FC W_0X1; FC W_0X0; FC W_ULT; FC W_FALSE; FC W_EQCHK;
	FC W_SWLIT; .2BYTE -1; FC W_SWLIT; .2BYTE 0; FC W_ULT; FC W_FALSE;
	FC W_EQCHK;
	FC W_SWLIT; .2BYTE 0; FC W_SWLIT; .2BYTE -1; FC W_ULT; FC W_TRUE;
	FC W_EQCHK; FC W_PZCHK

TEST_UGT:
	FC W_0X0; FC W_0X1; FC W_UGT; FC W_FALSE; FC W_EQCHK;
	FC W_0X1; FC W_0X1; FC W_UGT; FC W_FALSE; FC W_EQCHK;
	FC W_0X1; FC W_0X0; FC W_UGT; FC W_TRUE; FC W_EQCHK;
	FC W_SWLIT; .2BYTE -1; FC W_SWLIT; .2BYTE 0; FC W_UGT; FC W_TRUE;
	FC W_EQCHK;
	FC W_SWLIT; .2BYTE 0; FC W_SWLIT; .2BYTE -1; FC W_UGT; FC W_FALSE;
	FC W_EQCHK; FC W_PZCHK

TEST_EQZ:
	FC W_0X0; FC W_EQZ; FC W_TRUE; FC W_EQCHK; FC W_PZCHK;
	FC W_0X1; FC W_EQZ; FC W_FALSE; FC W_EQCHK; FC W_PZCHK;

TEST_NEZ:
	FC W_0X0; FC W_NEZ; FC W_FALSE; FC W_EQCHK; FC W_PZCHK;
	FC W_0X1; FC W_NEZ; FC W_TRUE; FC W_EQCHK; FC W_PZCHK;
	
TEST_LTZ:
	FC W_0X0; FC W_LTZ; FC W_FALSE; FC W_EQCHK; FC W_PZCHK;
	FC W_0X1; FC W_LTZ; FC W_FALSE; FC W_EQCHK; FC W_PZCHK;
	FC W_SWLIT; .2BYTE -1; FC W_LTZ; FC W_TRUE;
	FC W_EQCHK; FC W_PZCHK

TEST_GTZ:
	FC W_0X0; FC W_GTZ; FC W_FALSE; FC W_EQCHK; FC W_PZCHK;
	FC W_0X1; FC W_GTZ; FC W_TRUE; FC W_EQCHK; FC W_PZCHK;
	FC W_SWLIT; .2BYTE -1; FC W_GTZ; FC W_FALSE;
	FC W_EQCHK; FC W_PZCHK

TEST_MIN:
	FC W_0X0; FC W_0X1; FC W_MIN; FC W_0X0; FC W_EQCHK; FC W_PZCHK
	FC W_0X1; FC W_0X0; FC W_MIN; FC W_0X0; FC W_EQCHK; FC W_PZCHK
	FC W_SWLIT; .2BYTE -1; FC W_0X0; FC W_MIN; FC W_SWLIT; .2BYTE -1;
	FC W_EQCHK; FC W_PZCHK

TEST_MAX:
	FC W_0X0; FC W_0X1; FC W_MAX; FC W_0X1; FC W_EQCHK; FC W_PZCHK
	FC W_0X1; FC W_0X0; FC W_MAX; FC W_0X1; FC W_EQCHK; FC W_PZCHK
	FC W_SWLIT; .2BYTE -1; FC W_0X0; FC W_MAX; FC W_SWLIT; .2BYTE 0;
	FC W_EQCHK; FC W_PZCHK

TEST_UMIN:
	FC W_0X0; FC W_0X1; FC W_UMIN; FC W_0X0; FC W_EQCHK; FC W_PZCHK
	FC W_0X1; FC W_0X0; FC W_UMIN; FC W_0X0; FC W_EQCHK; FC W_PZCHK
	FC W_SWLIT; .2BYTE -1; FC W_0X0; FC W_UMIN; FC W_SWLIT; .2BYTE 0;
	FC W_EQCHK; FC W_PZCHK

TEST_UMAX:
	FC W_0X0; FC W_0X1; FC W_UMAX; FC W_0X1; FC W_EQCHK; FC W_PZCHK
	FC W_0X1; FC W_0X0; FC W_UMAX; FC W_0X1; FC W_EQCHK; FC W_PZCHK
	FC W_SWLIT; .2BYTE -1; FC W_0X0; FC W_UMAX; FC W_SWLIT; .2BYTE -1;
	FC W_EQCHK; FC W_PZCHK

TEST_PLUS:
	FC W_0X0; FC W_0X1; FC W_PLUS; FC W_0X1; FC W_EQCHK
	FC W_0X1; FC W_0X1; FC W_PLUS; FC W_0X2; FC W_EQCHK
	FC W_0XFFFFFFFF; FC W_0X1; FC W_PLUS; FC W_0X0; FC W_EQCHK

TEST_MINUS:
	FC W_0X1; FC W_0X0; FC W_MINUS; FC W_0X1; FC W_EQCHK
	FC W_0X1; FC W_0X1; FC W_MINUS; FC W_0X0; FC W_EQCHK

TEST_MULTI:
	FC W_0X0; FC W_0X1; FC W_MULTI; FC W_0X0; FC W_EQCHK
	FC W_0X1; FC W_0X1; FC W_MULTI; FC W_0X1; FC W_EQCHK
	FC W_0X2; FC W_0X1; FC W_MULTI; FC W_0X2; FC W_EQCHK
	FC W_0X2; FC W_0X2; FC W_MULTI; FC W_0X4; FC W_EQCHK
	FC W_0X2; FC W_0X3; FC W_MULTI; FC W_0X6; FC W_EQCHK

TEST_DIVID:
	FC W_0X0; FC W_0X1; FC W_DIVID; FC W_0X0; FC W_EQCHK
	FC W_0X1; FC W_0X1; FC W_DIVID; FC W_0X1; FC W_EQCHK
	FC W_0X2; FC W_0X1; FC W_DIVID; FC W_0X2; FC W_EQCHK
	FC W_0X2; FC W_0X2; FC W_DIVID; FC W_0X1; FC W_EQCHK
	FC W_0X2; FC W_0X3; FC W_DIVID; FC W_0X0; FC W_EQCHK
	FC W_PZCHK

TEST_MOD:
	FC W_0X5; FC W_0X3; FC W_MOD; FC W_0X2; FC W_EQCHK;
	FC W_0X7; FC W_0X4; FC W_MOD; FC W_0X3; FC W_EQCHK;
	FC W_PZCHK

TEST_AND:
	FC W_0X0; FC W_0X0; FC W_AND; FC W_0X0; FC W_EQCHK
	FC W_0X1; FC W_0X0; FC W_AND; FC W_0X0; FC W_EQCHK
	FC W_0X0; FC W_0X1; FC W_AND; FC W_0X0; FC W_EQCHK
	FC W_0X1; FC W_0X1; FC W_AND; FC W_0X1; FC W_EQCHK
	FC W_PZCHK

TEST_OR:
	FC W_0X0; FC W_0X0; FC W_OR; FC W_0X0; FC W_EQCHK
	FC W_0X1; FC W_0X0; FC W_OR; FC W_0X1; FC W_EQCHK
	FC W_0X0; FC W_0X1; FC W_OR; FC W_0X1; FC W_EQCHK
	FC W_0X1; FC W_0X1; FC W_OR; FC W_0X1; FC W_EQCHK
	FC W_PZCHK

TEST_XOR:
	FC W_0X0; FC W_0X0; FC W_XOR; FC W_0X0; FC W_EQCHK
	FC W_0X1; FC W_0X0; FC W_XOR; FC W_0X1; FC W_EQCHK
	FC W_0X0; FC W_0X1; FC W_XOR; FC W_0X1; FC W_EQCHK
	FC W_0X1; FC W_0X1; FC W_XOR; FC W_0X0; FC W_EQCHK
	FC W_PZCHK

TEST_LSHIFT:
	FC W_0X5; FC W_0X0; FC W_LSHIFT; FC W_0X5; FC W_EQCHK
	FC W_0X5; FC W_0X1; FC W_LSHIFT; FC W_0XA; FC W_EQCHK
	FC W_PZCHK

TEST_RSHIFT:
	FC W_0X5; FC W_0X0; FC W_RSHIFT; FC W_0X5; FC W_EQCHK
	FC W_0X5; FC W_0X1; FC W_RSHIFT; FC W_0X2; FC W_EQCHK
	FC W_PZCHK

TEST_INVERT:
	FC W_TRUE; FC W_INVERT; FC W_FALSE; FC W_EQCHK
	FC W_FALSE; FC W_INVERT; FC W_TRUE; FC W_EQCHK
	FC W_PZCHK

TEST_NEGATE:
	FC W_SWLIT; .2BYTE 0; FC W_NEGATE; FC W_SWLIT; .2BYTE 0; FC W_EQCHK
	FC W_SWLIT; .2BYTE 1; FC W_NEGATE; FC W_SWLIT; .2BYTE -1; FC W_EQCHK
	FC W_SWLIT; .2BYTE -1; FC W_NEGATE; FC W_SWLIT; .2BYTE 1; FC W_EQCHK
	FC W_SWLIT; .2BYTE 9; FC W_NEGATE; FC W_SWLIT; .2BYTE -9; FC W_EQCHK
	FC W_SWLIT; .2BYTE -9; FC W_NEGATE; FC W_SWLIT; .2BYTE 9; FC W_EQCHK
	FC W_PZCHK

TEST_1PLUS:
	FC W_0X0; FC W_1PLUS; FC W_0X1; FC W_EQCHK
	FC W_0X1; FC W_1PLUS; FC W_0X2; FC W_EQCHK
	FC W_0X5; FC W_1PLUS; FC W_0X6; FC W_EQCHK
	FC W_PZCHK

TEST_2PLUS:
	FC W_0X0; FC W_2PLUS; FC W_0X2; FC W_EQCHK
	FC W_0X1; FC W_2PLUS; FC W_0X3; FC W_EQCHK
	FC W_0X5; FC W_2PLUS; FC W_0X7; FC W_EQCHK
	FC W_PZCHK

TEST_4PLUS:
	FC W_0X0; FC W_4PLUS; FC W_0X4; FC W_EQCHK
	FC W_0X1; FC W_4PLUS; FC W_0X5; FC W_EQCHK
	FC W_0X5; FC W_4PLUS; FC W_0X9; FC W_EQCHK
	FC W_PZCHK

TEST_1MINUS:
	FC W_0XA; FC W_1MINUS; FC W_0X9; FC W_EQCHK
	FC W_0XB; FC W_1MINUS; FC W_0XA; FC W_EQCHK
	FC W_0XC; FC W_1MINUS; FC W_0XB; FC W_EQCHK
	FC W_PZCHK

TEST_2MINUS:
	FC W_0XA; FC W_2MINUS; FC W_0X8; FC W_EQCHK
	FC W_0XB; FC W_2MINUS; FC W_0X9; FC W_EQCHK
	FC W_0XC; FC W_2MINUS; FC W_0XA; FC W_EQCHK
	FC W_PZCHK

TEST_4MINUS:
	FC W_0XA; FC W_4MINUS; FC W_0X6; FC W_EQCHK
	FC W_0XB; FC W_4MINUS; FC W_0X7; FC W_EQCHK
	FC W_0XC; FC W_4MINUS; FC W_0X8; FC W_EQCHK
	FC W_PZCHK

TEST_2MULTI:
	FC W_0X1; FC W_2MULTI; FC W_0X2; FC W_EQCHK
	FC W_0X3; FC W_2MULTI; FC W_0X6; FC W_EQCHK
	FC W_0X7; FC W_2MULTI; FC W_0XE; FC W_EQCHK
	FC W_PZCHK

TEST_4MULTI:
	FC W_0X1; FC W_4MULTI; FC W_0X4; FC W_EQCHK
	FC W_0X3; FC W_4MULTI; FC W_0XC; FC W_EQCHK
	FC W_0X7; FC W_4MULTI; FC W_SWLIT; .2BYTE 28; FC W_EQCHK
	FC W_PZCHK

TEST_2DIVID:
	FC W_0X8; FC W_2DIVID; FC W_0X4; FC W_EQCHK
	FC W_0X7; FC W_2DIVID; FC W_0X3; FC W_EQCHK
	FC W_0X6; FC W_2DIVID; FC W_0X3; FC W_EQCHK
	FC W_PZCHK

TEST_4DIVID:
	FC W_0X8; FC W_4DIVID; FC W_0X2; FC W_EQCHK
	FC W_0X7; FC W_4DIVID; FC W_0X1; FC W_EQCHK
	FC W_0X6; FC W_4DIVID; FC W_0X1; FC W_EQCHK
	FC W_PZCHK

TEST_ABS:
	FC W_0X0; FC W_ABS; FC W_0X0; FC W_EQCHK
	FC W_SWLIT; .2BYTE 1;  FC W_ABS; FC W_0X1; FC W_EQCHK
	FC W_SWLIT; .2BYTE -1; FC W_ABS; FC W_0X1; FC W_EQCHK
	FC W_PZCHK

TEST_CLOAD:
	FC W_ULLIT; .4BYTE 1f; FC W_CLOAD; FC W_UWLIT;
1:
	.2BYTE 0XA5; FC W_EQCHK; FC W_PZCHK;

TEST_WLOAD:
	FC W_ULLIT; .4BYTE 1f; FC W_WLOAD; FC W_ULLIT;
1:
	.4BYTE 0XBAE9FA50; FC W_0XFFFF; FC W_AND; FC W_EQCHK; FC W_PZCHK;
	FC W_ULLIT; .4BYTE 1b; FC W_1PLUS; FC W_WLOAD;
	FC W_UWLIT; .2BYTE 0XE9FA; FC W_EQCHK; FC W_PZCHK;
	
TEST_LLOAD:
	j 2f
	.p2align 2, 0
1:
	.4BYTE 0XFA50BEEF; .4BYTE 0XBAAD1234;
2:
	FC W_ULLIT; .4BYTE 1b; FC W_LLOAD;
	FC W_ULLIT; .4BYTE 0XFA50BEEF; FC W_EQCHK
	FC W_ULLIT; .4BYTE 1b; FC W_1PLUS; FC W_LLOAD;
	FC W_ULLIT; .4BYTE 0X34FA50BE; FC W_EQCHK
	FC W_ULLIT; .4BYTE 1b; FC W_2PLUS; FC W_LLOAD;
	FC W_ULLIT; .4BYTE 0X1234FA50; FC W_EQCHK
	FC W_PZCHK

TEST_LOAD:
	j 2f
	.p2align 2, 0
1:
	.4BYTE 0XFA50BEEF; .4BYTE 0XBAAD1234;
2:
	FC W_ULLIT; .4BYTE 1b; FC W_LOAD;
	FC W_ULLIT; .4BYTE 0XFA50BEEF; FC W_EQCHK
	FC W_ULLIT; .4BYTE 1b; FC W_1PLUS; FC W_LOAD;
	FC W_ULLIT; .4BYTE 0X34FA50BE; FC W_EQCHK
	FC W_ULLIT; .4BYTE 1b; FC W_2PLUS; FC W_LOAD;
	FC W_ULLIT; .4BYTE 0X1234FA50; FC W_EQCHK
	FC W_PZCHK

TEST_DP_HERE_PAD:
	FC W_PAD; FC W_HERE; FC W_MINUS; FC W_GTZ; FC W_TRUE; FC W_EQCHK
	FC W_PZCHK

TEST_CSTORE:
	FC W_UWLIT; .2BYTE 0XAA; FC W_PAD; FC W_2DUP; FC W_CSTORE;
	FC W_CLOAD; FC W_EQCHK; FC W_PZCHK

TEST_WSTORE:
	FC W_UWLIT; .2BYTE 0XFF55; FC W_PAD; FC W_2DUP; FC W_WSTORE;
	FC W_WLOAD; FC W_EQCHK;
	FC W_UWLIT; .2BYTE 0XAF50; FC W_PAD; FC W_1PLUS; FC W_2DUP;
	FC W_WSTORE; FC W_WLOAD; FC W_EQCHK
	FC W_UWLIT; .2BYTE 0X5055; FC W_PAD; FC W_WLOAD; FC W_EQCHK;
	FC W_PZCHK

TEST_LSTORE:
	FC W_ULLIT; .4BYTE 0X89ABCDEF; FC W_PAD; FC W_2DUP; FC W_LSTORE;
	FC W_LLOAD; FC W_EQCHK;
	FC W_ULLIT; .4BYTE 0X01234567; FC W_PAD; FC W_1PLUS; FC W_2DUP;
	FC W_LSTORE; FC W_LLOAD; FC W_EQCHK;
	FC W_PAD; FC W_LLOAD; FC W_ULLIT; .4BYTE 0x234567EF; FC W_EQCHK
	FC W_ULLIT; .4BYTE 0XDEADBEEF; FC W_PAD; FC W_2PLUS; FC W_2DUP;
	FC W_LSTORE; FC W_LLOAD; FC W_EQCHK;
	FC W_PAD; FC W_LLOAD; FC W_ULLIT; .4BYTE 0xBEEF67EF; FC W_EQCHK
	FC W_ULLIT; .4BYTE 0XBAADD001; FC W_PAD; FC W_0X3; FC W_PLUS;
	FC W_2DUP; FC W_LSTORE; FC W_LLOAD; FC W_EQCHK;
	FC W_PAD; FC W_LLOAD; FC W_ULLIT; .4BYTE 0x01EF67EF; FC W_EQCHK
	FC W_PZCHK;

TEST_STORE:
	FC W_ULLIT; .4BYTE 0X01234567; FC W_PAD; FC W_2DUP; FC W_STORE;
	FC W_LOAD; FC W_EQCHK;
	FC W_ULLIT; .4BYTE 0X89ABCDEF; FC W_PAD; FC W_1PLUS; FC W_2DUP;
	FC W_STORE; FC W_LOAD; FC W_EQCHK;
	FC W_PAD; FC W_LLOAD; FC W_ULLIT; .4BYTE 0xABCDEF67; FC W_EQCHK
	FC W_ULLIT; .4BYTE 0XBEEFDEAD; FC W_PAD; FC W_2PLUS; FC W_2DUP;
	FC W_STORE; FC W_LOAD; FC W_EQCHK;
	FC W_PAD; FC W_LOAD; FC W_ULLIT; .4BYTE 0xDEADEF67; FC W_EQCHK
	FC W_ULLIT; .4BYTE 0XD001BAAD; FC W_PAD; FC W_0X3; FC W_PLUS;
	FC W_2DUP; FC W_STORE; FC W_LOAD; FC W_EQCHK;
	FC W_PAD; FC W_LOAD; FC W_ULLIT; .4BYTE 0xADADEF67; FC W_EQCHK
	FC W_PZCHK;

TEST_WALIGNED:
	FC W_0X0; FC W_WALIGNED; FC W_0X0; FC W_EQCHK;
	FC W_0X1; FC W_WALIGNED; FC W_0X2; FC W_EQCHK;
	FC W_0X2; FC W_WALIGNED; FC W_0X2; FC W_EQCHK;
	FC W_0X3; FC W_WALIGNED; FC W_0X4; FC W_EQCHK;
	FC W_0X4; FC W_WALIGNED; FC W_0X4; FC W_EQCHK;
	FC W_PZCHK;

TEST_LALIGNED:
	FC W_0X0; FC W_LALIGNED; FC W_0X0; FC W_EQCHK;
	FC W_0X1; FC W_LALIGNED; FC W_0X4; FC W_EQCHK;
	FC W_0X2; FC W_LALIGNED; FC W_0X4; FC W_EQCHK;
	FC W_0X3; FC W_LALIGNED; FC W_0X4; FC W_EQCHK;
	FC W_0X4; FC W_LALIGNED; FC W_0X4; FC W_EQCHK;
	FC W_0X5; FC W_LALIGNED; FC W_0X8; FC W_EQCHK;
	FC W_0X7; FC W_LALIGNED; FC W_0X8; FC W_EQCHK;
	FC W_0X8; FC W_LALIGNED; FC W_0X8; FC W_EQCHK;
	FC W_PZCHK;

	/*
	no ALIGNED:
	we use WALIGNED for instruction alignment
	we use LALIGNED for atomic access alignment
	*/

TEST_CELL_CELLS:
	FC W_CELL; FC W_0X4; FC W_EQCHK
	FC W_0X0; FC W_CELLS; FC W_0X0; FC W_EQCHK
	FC W_0X1; FC W_CELLS; FC W_0X4; FC W_EQCHK
	FC W_0X2; FC W_CELLS; FC W_0X8; FC W_EQCHK
	FC W_PZCHK;

TEST_PAUSE:
	FC W_0X5; FC W_0X7; FC W_PAUSE; FC W_0X7; FC W_EQCHK;
	FC W_0X5; FC W_EQCHK; FC W_PZCHK

TEST_ON_OFF:
	FC W_PAD; FC W_ON; FC W_PAD; FC W_LOAD; FC W_TRUE; FC W_EQCHK;
	FC W_PAD; FC W_OFF; FC W_PAD; FC W_LOAD; FC W_FALSE; FC W_EQCHK;
	FC W_PZCHK

TEST_ALLOT:
	FC W_HERE; FC W_0X0; FC W_ALLOT; FC W_HERE; FC W_EQCHK;
	FC W_HERE; FC W_0X1; FC W_ALLOT; FC W_HERE; FC W_MINUS; FC W_NEGATE;
	FC W_0X1; FC W_EQCHK;
	FC W_HERE; FC W_0X1; FC W_NEGATE; FC W_ALLOT; FC W_HERE; FC W_MINUS;
	FC W_0X1; FC W_EQCHK;
	FC W_PZCHK;

	

TEST_CCOMMA:
	FC W_HERE; FC W_0X10; FC W_0XFF; FC W_FILL;
	FC W_HERE; FC W_0XF; FC W_CCOMMA;
	FC W_DUP; FC W_CLOAD; FC W_0XF; FC W_EQCHK;
	FC W_HERE; FC W_MINUS; FC W_NEGATE; FC W_0X1; FC W_EQCHK;
	FC W_0X1; FC W_NEGATE; FC W_ALLOT;
	FC W_PZCHK;
	
TEST_WCOMMA:
	FC W_HERE; FC W_0X10; FC W_0XAA; FC W_FILL;
	FC W_HERE; FC W_UWLIT; .2BYTE 0xABCD; FC W_WCOMMA;
	FC W_DUP; FC W_WLOAD; FC W_UWLIT; .2BYTE 0xABCD; FC W_EQCHK;
	FC W_HERE; FC W_MINUS; FC W_NEGATE; FC W_0X2; FC W_EQCHK;
	FC W_0X2; FC W_NEGATE; FC W_ALLOT;
	FC W_PZCHK;
	
TEST_LCOMMA:
	FC W_HERE; FC W_0X10; FC W_0X77; FC W_FILL;
	FC W_HERE; FC W_ULLIT; .4BYTE 0x89123456; FC W_LCOMMA;
	FC W_DUP; FC W_LLOAD; FC W_ULLIT; .4BYTE 0x89123456; FC W_EQCHK;
	FC W_HERE; FC W_MINUS; FC W_NEGATE; FC W_0X4; FC W_EQCHK;
	FC W_0X4; FC W_NEGATE; FC W_ALLOT;
	FC W_PZCHK;

TEST_COMMA:
	FC W_HERE; FC W_0X10; FC W_0X33; FC W_FILL;
	FC W_HERE; FC W_ULLIT; .4BYTE 0xFEDCBA89; FC W_COMMA;
	FC W_DUP; FC W_LOAD; FC W_ULLIT; .4BYTE 0xFEDCBA89; FC W_EQCHK;
	FC W_HERE; FC W_MINUS; FC W_NEGATE; FC W_CELL; FC W_EQCHK;
	FC W_CELL; FC W_NEGATE; FC W_ALLOT;
	FC W_PZCHK;

	.include "string_test.S"
	.include "io_test.S"
	.include "assembler_test.S"
	.include "interpret_test.S"

	RPOP ra
	ret
